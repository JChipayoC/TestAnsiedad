<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lisis de Resultados</title>
    <link rel="stylesheet" href="resultados.css">
</head>

<body>
    <div class="result-container">
        <h1 id="nombreUsuario"></h1>
        <p class="score-text">Puntaje Obtenido: <span id="score"></span>/250</p>

        <div id="progress-bar">
            <div id="progress"></div>
        </div>

        <div id="visual-result">
            <span id="visual-result-icon"></span>
            <p id="visual-result-text"></p>
        </div>

        <div class="loader-container">
            <p>Reflexionando sobre tus respuestas...</p>
            <img src="tenor.gif" alt="Cargando Nivel..." class="loader-gif">
            <p>Ser√°s redirigido en un momento...</p>
        </div>
    </div>

    <script>
        window.onload = function () {
            // --- C√ÅLCULO DE RESULTADOS (sin cambios) ---
            const result = sessionStorage.getItem('testResult') || 0;
            const nombre = sessionStorage.getItem('nombreUsuario') || 'Jugador';
            const totalQuestions = 50;
            const percentage = (result / (totalQuestions * 5)) * 100;

            // --- ACTUALIZACI√ìN DE LA INTERFAZ ---
            document.getElementById('nombreUsuario').innerText = "Analizando resultados para " + nombre + "...";
            document.getElementById('score').innerText = result;

            // --- L√ìGICA DE LA BARRA DE PROGRESO Y REVELACI√ìN ---
            const progressBar = document.getElementById('progress');
            setTimeout(() => {
                progressBar.style.width = percentage + '%';
            }, 500);

            // --- NUEVO: L√ìGICA DEL RESULTADO VISUAL ---
            const visualResult = document.getElementById('visual-result');
            const visualIcon = document.getElementById('visual-result-icon');
            const visualText = document.getElementById('visual-result-text');

            // Oculta el resultado visual hasta que la barra termine
            setTimeout(() => {
                if (percentage <= 33) {
                    visualIcon.innerText = 'üå±';
                    visualText.innerText = 'Nivel Inicial';
                    visualResult.className = 'level-low';
                } else if (percentage <= 66) {
                    visualIcon.innerText = 'üåø';
                    visualText.innerText = 'Nivel Intermedio';
                    visualResult.className = 'level-moderate';
                } else {
                    visualIcon.innerText = 'üå∏';
                    visualText.innerText = 'Nivel Avanzado';
                    visualResult.className = 'level-high';
                }
                visualResult.style.display = 'flex'; // Muestra el resultado
            }, 2000); // Aparece despu√©s de 2 segundos

            // --- REDIRECCI√ìN (sin cambios) ---
            let redirectPage = 'nivel' + Math.ceil(percentage / 10) + '.html';
            setTimeout(() => {
                window.location.href = redirectPage;
            }, 10000);
        }
    </script>
</body>
</html>